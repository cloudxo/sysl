let avroTransform = \schema \appName
# Load Avro spec whose format is protobuf 
let schema = //encoding.json.decode(//os.file(schema));

let type = schema("type")?.s:"";


$'
{
  "apps": {
    "${appName} ${type}": {
      "name": {
        "part": [
          "${appName}"
        ]
      },
    "attrs": {
      "package": {
        "s": "${schema("namespace").s}"
      }
    },
    "types":  {
    }
}
'
;

avroTransform("../test-avro/fabric-entitlements.avsc", "Test")
